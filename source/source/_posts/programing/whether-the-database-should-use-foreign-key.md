---
title: 数据库是否应该使用外键
date: 2019-11-20 09:27:37
categories: Programing
---

## 先说结论

能不用就不用，把操作交给应用层处理。

<!-- more -->

## 优缺点

以下内容来自[shadowdoor](https://www.cnblogs.com/shadowdoor/p/9097361.html)

### 使用外键

优点

- 实现表与关联表之间的数据一致性。
- 可以迅速的建立一个可靠性非常高的数据库结构，而不用让应用程序层去做过多的检查。
- 可以提高系统鲁棒性、健壮性。
- 可以实现开发人员和数据库设计人员的分工。

缺点

- 数据库需要维护外键的内部管理。
- 外键等于把数据的一致性事务实现，全部交给数据库服务器完成。
- 有了外键，当做一些涉及外键字段的增，删，更新操作之后，需要触发相关操作去检查，而不得不消耗资源。
- 外键还会因为需要请求对其他表内部加锁而容易出现死锁情况。
- 容易出现数据库I/O的瓶颈。

### 不使用外键

优点

- 减少了数据库表与表之间各种关联的复杂性。
- 牺牲应用服务器资源，换取数据库服务器的性能。
- 将主动权把控在自己手里。
- 去掉外键相当于优化数据库性能。

缺点

- 所有外键的约束，需要自己在逻辑层自己实现。
- 会出现数据错误覆写，错误数据进库的情况。
- 消耗了服务器的性能。
- 业务层里夹带持久层特性，耦合。

## 延伸阅读

- [大家设计数据库时使用外键吗？](https://www.zhihu.com/question/19600081)

